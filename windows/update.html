<html>

<head>
  <title>Discord RPC Controller &bull; Update avaiable!</title>
  <link rel="stylesheet" href="css/reset.css">
  <link href="https://fonts.googleapis.com/css?family=K2D" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="css/update.css">
  <link href="css/ripple.css" rel="stylesheet">
</head>

<body>
  <div id="header">
    <img draggable="false" src="../icons/icon.png">
    <h1>Discord RPC Controller</h1>
  </div>
  <div id="content">
    <p id="description"></p>
  </div>
  <div id="footer">
    <button id="update">
      Update
      <div class="rippleJS"></div>
    </button>
    <button id="later">
      Later
      <div class="rippleJS"></div>
    </button>
  </div>
  <script>if (typeof module === 'object') { window.module = module; module = undefined; }</script>

  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/showdown.min.js"></script>
  <script src="js/ripple.min.js"></script>

  <script>if (window.module) module = window.module;</script>
  <script>
    var converter = new showdown.Converter()

    const ipc = require('electron').ipcRenderer;
    const remote = require('electron').remote

  </script>
  <script>
    var shell = require('electron').shell;
    ipc.on('updateData', (event, message) => {
      $('#description').html(converter.makeHtml(message.body))
      $('#update').click(() => {
        console.log(message)
        shell.openExternal(`https://github.com/AlekEagleYT/rpc-control/releases/tag/${message.tag_name}`);
        remote.getCurrentWindow().close()
      })
    })


    $('#later').click(e => {
      remote.getCurrentWindow().close()
    })
  </script>
</body>

</html>